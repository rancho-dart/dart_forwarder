# This is the configuration file for a Dart server(DHCP & DNS & forwarding).
# For each interface, you can specify whether DHCP is enabled or not.
# While the DNS server is always enabled.

# This configuration contains 3 interfaces: ens32, ens37, ens33.
# ens33 is in cn. domain, ens32 is in sh.cn domain, ens37 is in sh.cn domain.
# This host serves as the DHCP & DNS server for the 2 domains: bj.cn and sh.cn.
# (and even the gateway for bj.cn and sh.cn, but this daemon does not do that)
# Domain cn is the parent domain of bj.cn and sh.cn.

# When a DHCP client in bj.cn or sh.cn applies for an IP address, this daemon will 
# answer it. And at the same time, the daemon will remember whether the client 
# supports Dart protocol or not. 

# If a DNS query packet arrives, this daemon will check whether the querier and 
# the queried party are in the same domain.
# If yes, it will return the IP address assigned by the DHCP service. 
# If not, it will return the IP address of this server's interface in the same domain.
# In other words, this server will forward packets between different domains. 
# (This will be handled by another forwarding program.)

uplink:
  name: ens33
  dart_domain: . # root domain (.) is treated as a non-dart domain, otherwise it should can be resolved by DNS servers configured in this interface(return ip, and support dart)
  public_ip_resolver: # used to find my public ip (if behind NAT)
    - http://c1.cn
    - http://ifconfig.me
    - http://api.ipify.org
    - http://ip.sb
    - http://ident.me  
    - http://ip.dnsexit.com
    - http://ip.tyk.nu
    - http://ip.changeip.com # first line is pure ip
  dns_servers:
    - 192.168.1.66

downlinks:
  - name: ens38
    address_pool: 10.200.0.100-10.200.0.199
    domain: bj.cn
    gateway: 10.200.0.1
    static_bindings:
      - mac: "00:0c:29:f1:65:17"
        ip: "10.200.0.99"
